<!DOCTYPE html>
<html data-require="math math-format">
<head>
	<title>Adding Fractions</title>
	<script src="../khan-exercise.js"></script>
	<script type="text/javascript">
		function multiplier( n ) {
			return n === 1 ? "" : "\\cdot\\dfrac{" + n + "}{" + n + "}";
		}
	</script>
</head>

<!--
2 fractions is done, we just have to do 3 fractions
-->

<body>
<div class="exercise">
	<div class="problems">

		<div id="two-fractions">
			<div class="vars">
			
				<!-- make sure we won't be dealing with huge common denominators or fractions that start off with common denominators -->
				<div data-ensure="getLCM( D1, D2 ) <= 60">

					<!-- temporary denominators -->
					<var id="_D1">randRange( 3, 20 )</var>
					<var id="_D2">randRange( 3, 20 )</var>

					<!-- temporary numerators -->
					<var id="_N1">randRange( 1, _D1 - 1 )</var>
					<var id="_N2">randRange( 1, _D2 - 1 )</var>
					<var id="RESULT">( _N1 / _D1 ) + ( _N2 / _D2 )</var>

					<var id="GCD1">getGCD( _N1, _D1 )</var>
					<var id="GCD2">getGCD( _N2, _D2 )</var>

					<!-- permanent numerators and denominators -->
					<var id="N1">round( _N1 / GCD1 )</var>
					<var id="D1">round( _D1 / GCD1 )</var>
					<var id="N2">round( _N2 / GCD2 )</var>
					<var id="D2">round( _D2 / GCD2 )</var>

				</div>

				<!-- LCM and multipliers to get fractions to common denoms -->
				<var id="LCM">getLCM( D1, D2 )</var>
				<var id="M1">round( LCM / D1 )</var>
				<var id="M2">round( LCM / D2 )</var>

				<!-- result simplification -->
				<var id="GCD">getGCD( N1*M1 - N2*M2, M1*D1 )</var>
				<var id="N">round( ( N1*M1 + N2*M2 ) / GCD )</var>
				<var id="D">round( ( M1*D1 ) / GCD )</var>

			</div>

			<p class="question">Write the following as a <var>( RESULT < 1 ? "fraction" : "mixed number" )</var>. Simplify your answer to lowest terms.</p>

			<p class="problem"><code><var>fraction( _N1, _D1 )</var> + <var>fraction( _N2, _D2 )</var> = {?}</code></p>

			<div class="solution" data-type="mixed"><var>RESULT</var></div>

			<div class="hints">
			
				<div data-if="GCD1 > 1" data-unwrap>
					<p>The first fraction simplifies.</p>
					<p><code>= <var>fraction( N1, D1 )</var> + <var>fraction( _N2, _D2 )</var></code></p>
				</div>

				<div data-if="GCD2 > 1" data-unwrap>
					<p>The second fraction simplifies.</p>
					<p><code>= <var>fraction( N1, D1 )</var> + <var>fraction( N2, D2 )</var></code></p>
				</div>

				<div data-if="M1 * M2 === 1" data-unwrap>
				
					<p>The denominators are the same so we have found a common denominator.</p>
				
				</div><div data-else-if="M1 === 1" data-unwrap>

					<p>We need to find a common denominator. The first denominator is <code><var>M2</var></code> times the second denominator, so we can multiply the second fraction by <code><var>M2</var></code>.</p>

				</div><div data-else-if="M2 === 1" data-unwrap>

					<p>We need to find a common denominator. The second denominator is <code><var>M1</var></code> times the first denominator, so we can multiply the first fraction by <code><var>M1</var></code>.</p>

				</div><div data-else data-unwrap>

					<p>We need to find a common denominator. The least common multiple of <code><var>D1</var></code> and <code><var>D2</var></code> is the smallest possible denominator.</p>
					<p><code>\mbox{LCM}( <var>D1</var>, <var>D2</var> ) = <var>LCM</var></code></p>
					<p>To get both fractions to a denominator of <code><var>LCM</var></code>, we need to multiply the first fraction by <code><var>M1</var></code> and we need to multiply the second fraction by <code><var>M2</var></code>.</p>

				</div>

				<div>
					<p>So now we have:</p>
					<p><code>= \left(<var>fraction( N1, D1 ) + multiplier( M1 )</var>\right) + \left(<var>fraction( N2, D2 ) + multiplier( M2 )</var>\right)</code></p>
				</div>

				<p><code>= <var>fraction( M1*N1, M1*D1 )</var> + <var>fraction( M2*N2, M2*D2 )</var></code></p>

				<div>
					<p>Now that we have a common denominator, we can add:</p>
					<p><code>= \dfrac{ <var>M1*N1</var> + <var>M2*N2</var> }{ <var>M1*D1</var> }</code></p>
				</div>

				<p><code>= <var>fraction( M1*N1 + M2*N2, M1*D1 )</var></code></p>

				<div data-if="GCD > 1">
					<p>This simplifies, so we now have:</p>
					<p data-if="D !== 1"><code>= <var>fraction( N, D )</var></code><span data-if="N > D"> (one more step left)</span></p>
					<p data-else><code>= <var>N</var></code><p>
				</div>
			
				<div data-if="N > D && D !== 1">
					<p>We need to change this to a mixed number:</p>
					<p><code>= <var> round(( N - N % D ) / D) + fraction( round( N % D ), D )</var></code></p>
				</div>
			</div>

		</div>

		<div id="three-fractions">
			<div class="vars">
				<div data-ensure="getLCM( getLCM( D1, D2 ), D3 ) < 61 && D1 !== D2 && D1 !== D3 && D2 !== D3">
					<var id="D1">randRange( 3, 20 )</var>
					<var id="D2">randRange( 3, 20 )</var>
					<var id="D3">randRange( 3, 20 )</var>
				</div>
				<var id="N1">randRange( 1, D1 - 1 )</var>
				<var id="N2">randRange( 1, D2 - 1 )</var>
				<var id="N3">randRange( 1, D3 - 1 )</var>
				<var id="LCM">getLCM( getLCM( D1, D2 ) , D3 )</var>
				<var id="F1">LCM / D1</var>
				<var id="F2">LCM / D2</var>
				<var id="F3">LCM / D3</var>

				<var id="W">(((N1 * F1 + N2 * F2 + N3 * F3) - (N1 * F1 + N2 * F2 + N3 * F3) % LCM ) / LCM)</var>
			</div>

			<p class="problem">Write the following as a <var>( W === 0 ? "fraction" : "mixed number" )</var>. Simplify your answer to lowest terms.</p>
			<p class="question"><code><var>fraction( N1, D1 )</var> + <var>fraction( N2, D2 )</var> + <var>fraction( N3, D3 )</var>= ?</code></p>

			<div data-if="W === 0">
				<div class="solution" "data-type="rational"><var>( N1 * F1 + N2 * F2 + N3 * F3 ) / LCM</var></div>
			</div>
			<div data-else>
				<div class="solution" data-type="multiple">
					<p><span class="sol" data-type="text"><var>W</var></span> 
					   <span class="sol" data-type="rational"><var>( N1 * F1 + N2 * F2  + N3 * F3 - W * LCM ) / LCM</var></span></p>
				</div>
			</div>

			<div class="hints">
				<p>First, we need to find a common denominator. The least common multiple of <code><var>D1</var></code> and <code><var>D2</var></code> and <code><var>D3</var></code> is the smallest possible common denominator.</p>
				<p>LCM( <code><var>D1</var></code>, <code><var>D2</var></code>, <code><var>D3</var></code> ) <code>= <var>LCM</var></code></p>
				<div>
					<p>Changing all three fractions to have a denominator of <code><var>LCM</var></code>, the problem becomes:</p>
					<p><code><var>fraction( N1, D1 )</var>\cdot <var>fraction( F1, F1 )</var> + <var>fraction( N2, D2 )</var>\cdot <var>fraction( F2, F2 )</var> + <var>fraction( N3, D3 )</var>\cdot <var>fraction( F3, F3 )</var> = ?</code></p>
				</div>
				<p><code><var>fraction( N1 * F1, LCM )</var> + <var>fraction( N2 * F2, LCM )</var>  + <var>fraction( N3 * F3, LCM )</var>= ?</code></p>
				<p><code><var>fraction( N1 * F1 + N2 * F2 + N3 * F3, LCM )</var></code> (Addition)</p>
				<p data-if="getGCD( N1 * F1 + N2 * F2 + N3 * F3, LCM ) > 1">Simplifying to lowest terms, <code><var>fractionReduce( N1 * F1 + N2 * F2 + N3 * F3, LCM )</var></code>.</p>
				<p data-if="W !== 0">Putting in mixed number format, <code><var>W + fractionReduce( N1 * F1 + N2 * F2  + N3 * F3 - W * LCM, LCM )</var></code>
			</div>
		</div>
	</div>
</div>
</body>
</html>
